const S = { EXP: { c: ".work", bC: ".row-item-not-it", bI: "#btn-sw-experiencias", tT: ".txt-texto-ex", tC: ".txt-cont-ex", iC: ".info-cont-ex", hIA: !0 }, PRJ: { c: ".side-projects", bC: ".row-item-not-it-pj", bI: "#btn-sw-projetos", tT: ".txt-texto-pj", tC: ".txt-cont-pj", iC: ".info-cont-pj", hIA: !1 } }; function sTL(s, mF) { const b = document.querySelector(s); if (!b) return; b.addEventListener("click", function () { const iCH = this.getAttribute("fn") === "true", nSIH = !iCH; this.setAttribute("fn", nSIH ? "true" : "false"), mF(nSIH) }) } window.addEventListener("load", async function () { console.log("Página e recursos externos carregados. Iniciando o carregamento."); try { await lP(), await lE(), await lPR(), await lF(), gVE(!0), gVP(!0) } catch (e) { console.error("Falha na inicialização da página:", e) } }), document.addEventListener("DOMContentLoaded", () => { sTL(S.EXP.bI, gVE), sTL(S.PRJ.bI, gVP) }); function gPB(cS, bC, sR) { const c = document.querySelector(cS), mB = c ? c.querySelector(bC) : null; if (!c || !mB) return; if (sR) { const tORI = c.querySelectorAll(".row-item"); if (tORI.length > 1) return c.insertBefore(mB, tORI[1]) } c.appendChild(mB) } function gV(sH, c) { const cC = document.querySelector(c.c); if (!cC) return; const tORI = cC.querySelectorAll(".row-item"), mB = cC.querySelector(c.bC), tM = document.querySelector(c.tT), tTTM = document.querySelector(c.tC), iQM = document.querySelector(c.iC), tI = tORI.length, iO = tI - 2; gPB(c.c, c.bC, sH), tM && (tM.textContent = sH ? "Mostrar mais" : "Mostrar menos"), iQM && (iQM.style.display = sH ? "" : "none"); if (sH && tTTM) { const iTx = iO === 1 ? "item" : "itens"; tTTM.textContent = `${iO} ${iTx} ocultado${iO === 1 ? "" : "s"}` } mB && (mB.style.display = tI > 2 ? "" : "none"); if (tI <= 2) return; for (let i = 0; i < tI; i++) { const rI = tORI[i], iI = i > 0 && i < tI - 1, nD = iI && sH ? "none" : ""; rI.style.display = nD; if (c.hIA) { let nE = rI.nextElementSibling; while (nE && !nE.classList.contains("image-area")) nE = nE.nextElementSibling; if (nE && nE.classList.contains("image-area")) nE.style.display = nD } } } function gVE(sH) { gV(sH, S.EXP) } function gVP(sH) { gV(sH, S.PRJ) } async function lDAR({ url: u, containerId: cI, itemSelector: iS, renderFn: rF, dataPreProcessor: dPP }) { const c = document.getElementById(cI); if (!c) { console.error(`Contêiner ${cI} não encontrado.`); return } try { const r = await fetch(u); if (!r.ok) throw new Error(`Erro ${r.status}: ${r.statusText}`); let d = await r.json(); if (dPP) d = dPP(d); c.querySelectorAll(iS).forEach(e => e.remove()); const hC = d.map(rF).join(""); c.insertAdjacentHTML("beforeend", hC) } catch (e) { console.error(`Falha no carregamento de dados para ${cI}:`, e) } } async function lP() { await lDAR({ url: "data/profile.json", containerId: "box-profile", itemSelector: ".component-2", renderFn: i => `<div class="component-2 link-external" data-url="${i.url}" style="background: ${i.background_color}"><div class="text" style="color: ${i.text_color};"><img src="${i.icon_src}" alt="${i.icon_alt}" style="width: 15px;">${i.text ? "&nbsp;&nbsp;" : ""}${i.text}</div></div>` }) } async function lE() { await lDAR({ url: "data/experiencias.json", containerId: "listagem-dinamica-experiencias", itemSelector: ".work.list-rm, .image-area.list-rm", renderFn: i => { const iAH = i.imgs.map(s => `<div class="image2"><img class="image3" src="${s}" alt="Imagem de ${i.empresa}"></div>`).join(""); return `<div class="row-item list-rm"><div class="date">${i.date}</div><div class="contents"><a class="link" href="${i.link}" target="_blank" style="text-decoration: none;"><div class="line-1-text">${i.texto}</div><img class="open-new-tab-icon" src="./svg/OpenNewTabIcon.svg" /></a><div class="line-2">${i.empresa}</div></div></div><div class="image-area list-rm">${iAH}</div>` } }) } async function lPR() { const dPP = d => d.sort((a, b) => { if (a.status === 200 && b.status !== 200) return -1; if (b.status === 200 && a.status !== 200) return 1; return 0 }); await lDAR({ url: "data/projetos.json", containerId: "listagem-dinamica-projetos", itemSelector: ".row-item", dataPreProcessor: dPP, renderFn: i => { const s = i.status, iA = s === 200; return `<div class="row-item pj-${i.id}"><div class="date" style="cursor: default;"><div class="${i.item_linha.status_icon}"></div>${i.item_linha.status}</div><div class="contents link-external-projeto" style="cursor: ${iA ? "pointer" : "no-drop"};" data-url="${i.item_linha.conteudo.url}"><div class="link"><div class="line-1-text">${i.item_linha.conteudo.titulo}</div><img class="open-new-tab-icon" src="${i.item_linha.conteudo.icone_link_src}" style="display: ${iA ? "" : "none"};"/></div></div></div>` } }) } async function lF() { const dPP = d => d.sort((a, b) => { if (a.status === 200 && b.status !== 200) return -1; if (b.status === 200 && a.status !== 200) return 1; return 0 }); await lDAR({ url: "data/formacao.json", containerId: "listagem-dinamica-formacao", itemSelector: ".row-item", dataPreProcessor: dPP, renderFn: i => `<div class="row-item"><div class="date2"><div class="${i.status_icon}"></div>${i.status_text}</div><div class="contents"><div class="link"><div class="line-1-text">${i.titulo}</div></div><div class="line-22">${i.local}</div></div></div>` }) }